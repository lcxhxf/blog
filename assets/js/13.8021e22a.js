(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{601:function(e,t,s){"use strict";s.r(t);var l=s(17),n=Object(l.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("「本文已参与低调务实优秀中国好青年前端社群的写作活动」")]),e._v(" "),s("ul",[s("li",[e._v("首先我按照官网的方法进行安装配置了"),s("code",[e._v("egg-mysql")]),e._v("（"),s("a",{attrs:{href:"https://www.npmjs.com/package/egg-mysql",target:"_blank",rel:"noopener noreferrer"}},[e._v("配置文档地址"),s("OutboundLink")],1),e._v("）")]),e._v(" "),s("li",[e._v("但是"),s("code",[e._v("app")]),e._v("上并未挂载上"),s("code",[e._v("mysql")]),s("br"),e._v("\n打印一下"),s("code",[e._v("app.mysql")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("'use strict';\n\nconst Controller = require('egg').Controller\n\nclass HomeController extends Controller{\n\n    async index(){\n        //获取用户表的数据\n        const { ctx, app } = this;\n        console.log(app.mysql+'111111111111');\n        let result = await app.mysql.get(\"blog_content\",{})\n        console.log(result)\n        ctx.body=result\n    }\n}\n\nmodule.exports = HomeController\n")])])]),s("ul",[s("li",[s("p",[e._v("结果打印为"),s("code",[e._v("undefined")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3205e67f66d24e058cf921579666d85f~tplv-k3u1fbpfcp-zoom-1.image",alt:"在这里插入图片描述"}}),s("br"),e._v(" "),s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/57129b1be4e04ec999c1fbb10f80a7b7~tplv-k3u1fbpfcp-zoom-1.image",alt:"在这里插入图片描述"}})])]),e._v(" "),s("li",[s("p",[e._v("仔细检查比对的文档的每一个步骤都没有错，应该是声明出了问题就无法在this.app里获取到mysql")])]),e._v(" "),s("li",[s("p",[e._v("于是我修改了一下官方文档"),s("code",[e._v("config/plugin.js")]),e._v("里的内容\n官方文档的配置：")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("exports.mysql = {\n  enable: true,\n  package: 'egg-mysql'\n}\n")])])]),s("p",[e._v("我的配置（将"),s("code",[e._v("exports.mysql")]),e._v(" -> 改成"),s("code",[e._v("module.exports.mysql")]),e._v("）：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module.exports.mysql = {\n  enable: true,\n  package: 'egg-mysql'\n}\n")])])]),s("ul",[s("li",[s("p",[e._v("结果就成功了，成功拿到"),s("code",[e._v("app.mysql")])]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/609e033ad88641fc920292184c562f68~tplv-k3u1fbpfcp-zoom-1.image",alt:"在这里插入图片描述"}})]),e._v(" "),s("p",[e._v("但是又来了个bug， 从数据库取出来来的数据乱码了（可能是字符集配置的问题）")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a12a2cc2e93345ab879043b406710b5b~tplv-k3u1fbpfcp-zoom-1.image",alt:"在这里插入图片描述"}})]),e._v(" "),s("p",[e._v("ok，继续下一个bug！")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);